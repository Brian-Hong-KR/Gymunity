<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.gymunity.user.repository.SignMapper">

	<resultMap id="userResultMap" type="UserDTO">
		 <result property="userId" column="user_id"/>
		 <result property="userAccountId" column="user_account_id"/>
	</resultMap>
	
	<!--회원정보 가져오기-->
	<select id="findUserByAccountId" parameterType="string" resultMap="userResultMap">
		SELECT u.*, p.*
		FROM users u
		JOIN profiles p ON u.user_id = p.user_id
		WHERE u.user_account_id = #{userAccountId}
	</select>
	
	    
    <!-- last_signin 필드 업데이트 -->
    <update id="updateLastSignin" parameterType="User">
        UPDATE users
        SET last_signin = #{lastSignin}
        WHERE user_id = #{userId};
    </update>

</mapper>
<!-- 
		 <result property="nickName" column="nick_name"/>
		 <result property="lastLogin" column="last_login"/> -->